<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€å¸«ç¶­ä¿®å›å ±ç³»çµ±</title>
    <style>
        /* =========================================
           1. å…¨å±€åŸºç¤è¨­å®š
           ========================================= */
        body { 
            background-color: #efeff4; 
            font-family: -apple-system, "Microsoft JhengHei", "Helvetica Neue", Helvetica, Arial, sans-serif; 
            margin: 0; 
            padding: 20px 0 100px 0; 
            display: flex; 
            justify-content: center; 
            color: #333; 
            line-height: 1.5;
        }

        .form-container { 
            width: 100%; 
            max-width: 640px; 
            margin: 0 12px; 
        }
        
        /* =========================================
           2. HEADER å€åŸŸæ¨£å¼
           ========================================= */
        .header-card { 
            background: linear-gradient(135deg, #007377 0%, #005a5e 100%); 
            color: white; 
            padding: 24px; 
            border-radius: 8px; 
            margin-bottom: 20px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
        }

        .header-main-title { 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 20px; 
            color: #ffeb3b; 
            text-align: center; 
            border-bottom: 1px solid rgba(255,255,255,0.3); 
            padding-bottom: 15px; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .header-section { 
            margin-bottom: 15px; 
            padding: 12px; 
            background: rgba(0, 0, 0, 0.15); 
            border-radius: 6px; 
            font-size: 14px; 
            line-height: 1.6; 
        }

        .header-title-small { 
            font-weight: bold; 
            color: #81d4fa; 
            margin-bottom: 6px; 
            font-size: 16px; 
            display: flex;
            align-items: center;
        }

        .header-title-small::before {
            content: 'ğŸ“Œ';
            margin-right: 6px;
            font-size: 14px;
        }
        
        .header-list {
            margin: 5px 0 0 20px; 
            padding: 0;
            list-style-type: disc;
        }
        
        .header-list li {
            margin-bottom: 4px;
        }

        .header-link { 
            color: #ffeb3b; 
            text-decoration: underline; 
            font-weight: bold; 
            cursor: pointer; 
        }
        
        .header-link:hover {
            color: #fff;
        }
        
        .highlight-text {
            color: #d93025; 
            font-weight: bold;
        }

        .header-footer { 
            font-size: 12px; 
            text-align: center; 
            opacity: 0.8; 
            margin-top: 15px; 
            border-top: 1px dashed rgba(255,255,255,0.2);
            padding-top: 10px;
        }

        /* =========================================
           3. è¡¨å–®é¡Œç›®å¡ç‰‡æ¨£å¼
           ========================================= */
        .question-card { 
            background-color: #fff; 
            padding: 16px 20px; 
            margin-bottom: 12px; 
            border-radius: 8px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
            border-left: 4px solid transparent; 
            transition: all 0.2s ease; 
        }

        .question-card:focus-within { 
            border-left-color: #007377; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        }

        .question-title { 
            font-size: 16px; 
            font-weight: 600; 
            margin-bottom: 10px; 
            color: #242424; 
            display: flex;
            align-items: center;
        }
        
        /* å¿…å¡«æ˜Ÿè™Ÿæ¨£å¼ */
        .required { 
            color: #d93025; 
            margin-left: 4px; 
            font-weight: bold; 
        }

        /* éŒ¯èª¤ç‹€æ…‹æ¨£å¼ */
        .error-border { 
            border-left-color: #d93025 !important; 
            background-color: #fff0f0;
        }
        
        .error-input { 
            border: 2px solid #d93025 !important; 
            background-color: #fff8f8; 
        }
        
        .hidden-field { 
            display: none !important; 
        } 

        /* =========================================
           4. è¼¸å…¥æ¡†èˆ‡å…ƒä»¶æ¨£å¼
           ========================================= */
        input[type="text"], input[type="date"], input[type="number"], select, textarea { 
            width: 100%; 
            padding: 12px; 
            font-size: 16px; 
            border: 1px solid #dadce0; 
            border-radius: 6px; 
            box-sizing: border-box; 
            background-color: #fafafa; 
            transition: border 0.2s, background 0.2s;
        }

        input:focus, textarea:focus, select:focus { 
            border-color: #007377; 
            background-color: #fff; 
            outline: none; 
            box-shadow: 0 0 0 2px rgba(0, 115, 119, 0.1);
        }
        
        /* Radio Group */
        .radio-group { 
            display: flex; 
            gap: 20px; 
            margin-top: 5px; 
            padding: 5px 0;
        }

        .radio-label { 
            display: flex; 
            align-items: center; 
            cursor: pointer; 
            font-size: 16px; 
            padding: 5px; 
            border-radius: 4px; 
        }
        
        .radio-label:hover { background-color: #f0f0f0; }

        .radio-label input { 
            width: 20px; height: 20px; 
            margin-right: 8px; 
            accent-color: #007377; cursor: pointer; 
        }

        /* Multi-input row */
        .multi-input-row { display: flex; gap: 10px; }
        .multi-input-row input { flex: 1; }

        .small-note { 
            font-size: 13px; color: #666; 
            margin-top: 6px; background-color: #f5f5f5; 
            padding: 4px 8px; border-radius: 4px; 
            display: inline-block; 
        }

        /* =========================================
           5. æº«åº¦æ©«å¼æ’åˆ—
           ========================================= */
        .temp-row {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 12px;
        }
        
        .temp-row:last-child {
            margin-bottom: 0;
        }

        .temp-label {
            font-weight: bold;
            width: 50px;
            flex-shrink: 0;
            text-align: left;
            color: #333;
        }

        .temp-row input {
            width: 100px;
            padding: 8px;
            font-size: 15px;
        }

        .temp-unit {
            color: #666;
            font-size: 14px;
            width: 70px;
            flex-shrink: 0;
        }

        /* =========================================
           6. åº•éƒ¨å›ºå®šæ“ä½œå€
           ========================================= */
        .button-bar { 
            position: fixed; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background: linear-gradient(to top, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85)); 
            backdrop-filter: blur(5px); 
            padding: 12px 15px; 
            display: flex; 
            gap: 10px; 
            box-shadow: 0 -2px 8px rgba(0,0,0,0.1); 
            z-index: 9999;
        }

        .button-bar button { 
            flex: 1; 
            padding: 14px 10px; 
            font-size: 16px; 
            font-weight: 600; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .button-bar button:active { 
            transform: scale(0.98); 
        }

        .btn-primary { 
            background: linear-gradient(135deg, #007377, #005a5e); 
            color: white; 
        }

        .btn-primary:hover { 
            background: linear-gradient(135deg, #005a5e, #004548); 
        }

        .btn-secondary { 
            background: linear-gradient(135deg, #4CAF50, #45a049); 
            color: white; 
        }

        .btn-secondary:hover { 
            background: linear-gradient(135deg, #45a049, #3d8b40); 
        }

        /* =========================================
           7. RWD æ‰‹æ©Ÿç›´å‘å„ªåŒ–
           ========================================= */
        @media (max-width: 600px) {
            body { padding: 15px 0 100px 0; }
            .form-container { margin: 0 10px; }
            .header-card { padding: 18px; }
            .header-main-title { font-size: 22px; }
            .question-card { padding: 14px 16px; }
            .question-title { font-size: 15px; }
            input, select, textarea { font-size: 16px; padding: 10px; }
            .button-bar { gap: 8px; padding: 10px; }
            .button-bar button { padding: 12px 8px; font-size: 15px; }
            .temp-row input { width: 80px; padding: 6px; font-size: 14px; }
            .temp-label { width: 45px; font-size: 14px; }
            .temp-unit { font-size: 13px; }
        }
    </style>
</head>
<body>

<div class="form-container">
    <!-- ========== é é¢é ‚éƒ¨èªªæ˜ ========== -->
        <div class="header-card">
            <div class="header-main-title">ğŸ› ï¸ æŠ€å¸«ç¶­ä¿®å›å ±ç³»çµ±</div>
            
            <div class="header-section">
                <div class="header-title-small">ğŸ“¢ å…¬å¸å…§éƒ¨å…¬å‘Š</div>
                
                <div style="color: #e0e0e0; font-size: 0.95em; line-height: 1.8;">
                    
                    <p style="margin-bottom: 8px;">
                        æ­¡è¿ä½¿ç”¨æŠ€å¸«ç¶­ä¿®å›å ±ç³»çµ±ã€‚æœ¬ç³»çµ±ç‚ºå…¬å¸å…§éƒ¨å°ˆç”¨ä½œæ¥­ç³»çµ±ï¼Œåƒ…é™æŠ€å¸«æœ¬äººæ–¼åŸ·è¡Œç¶­ä¿®å‹¤å‹™æ™‚ä½¿ç”¨ã€‚
                    </p>

                    <ul style="margin: 0 0 10px 20px; padding-left: 0;">
                        <li>
                            <strong style="color: #fff;">åš´ç¦å¤–æµï¼š</strong>
                            æœ¬ç³»çµ±å«å®¢æˆ¶åŠè¨­å‚™ç›¸é—œä¹‹æ©Ÿæ•è³‡æ–™ï¼Œ
                            <span style="color: #ffcc00; font-weight: bold;">
                                ç¦æ­¢å…¬é–‹ã€è½‰å‚³ç³»çµ±é€£çµã€æˆªåœ–æˆ–æ´©éœ²ä»»ä½•å®¢æˆ¶è³‡è¨Š
                            </span>ã€‚
                        </li>

                        <li>
                            <strong style="color: #fff;">å¡«å¯«è²¬ä»»ï¼š</strong>
                            æ‰€æœ‰å›å ±å…§å®¹å°‡ä½œç‚ºç¶­ä¿®ç´€éŒ„ã€ä¿å›ºåˆ¤å®šã€å®¢è¨´è™•ç†åŠå…§éƒ¨ç¨½æ ¸ä¾æ“šï¼Œ
                            è«‹æ–¼é€å‡ºå‰ç¢ºèªè³‡æ–™æ­£ç¢ºæ€§ã€‚
                        </li>

                        <li>
                            <strong style="color: #fff;">å¡«å¯«æ™‚æ•ˆï¼š</strong>
                            è«‹æ–¼å¯¦éš›ç¶­ä¿®å®Œæˆå¾Œå³æ™‚å¡«å¯«å›å ±ï¼Œ
                            ä¸å¾—äº‹å¾Œè£œå¡«ã€ä»£å¡«æˆ–ä½¿ç”¨ä»–äººè³‡æ–™ã€‚
                        </li>

                        <li>
                            <strong style="color: #fff;">å¸³è™Ÿä½¿ç”¨ï¼š</strong>
                            æœ¬ç³»çµ±åƒ…é™æœ¬äººå¸³è™Ÿä½¿ç”¨ï¼Œç¦æ­¢å€Ÿç”¨ã€å…±ç”¨æˆ–ä»£ä»–äººå¡«å¯«ã€‚
                        </li>

                        <li>
                            <strong style="color: #fff;">ç³»çµ±æ”¯æ´ï¼š</strong>
                            å¦‚é‡ç³»çµ±ç•°å¸¸ã€æ“ä½œå•é¡Œæˆ–éŒ¯èª¤è¨Šæ¯ï¼Œè«‹è¯ç¹«
                            <span style="text-decoration: underline;">å“ä¿éƒ¨</span>ã€‚
                        </li>
                    </ul>

                    <p style="margin-top: 5px; font-size: 0.9em; color: #aaa;">
                        âš ï¸ é•åä¸Šè¿°è¦ç¯„è€…ï¼Œå°‡ä¾å…¬å¸ç›¸é—œç®¡ç†è¾¦æ³•åŠè³‡è¨Šå®‰å…¨è¦ç¯„è¾¦ç†ã€‚
                    </p>

                </div>
            </div>

            <div class="header-section">
                            <div class="header-title-small">â˜… æœ€æ–°ä½œæ¥­å…¬å‘Š â˜…</div>
                            <p style="margin-bottom: 10px;">ç›®å‰å·²æ­£å¼ä¸Šç·šã€Œæ–°ç‰ˆå„€å™¨ç¶­ä¿®å›å ±ç³»çµ±ã€ï¼Œå³æ—¥èµ·è«‹å…¨é¢æ”¹ç”¨æ–°ç‰ˆç³»çµ±é€²è¡Œå›å ±ã€‚</p>
                            
                            <a href="https://chansonwater0701-cmd.github.io/AssuranceDepartmentOK/test.html" target="_blank" style="display: block; background: rgba(255,255,255,0.2); color: #fff; text-decoration: none; padding: 12px; border-radius: 6px; text-align: center; font-weight: bold; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.3);">
                                ğŸš€ é»æ“Šå‰å¾€æ–°ç‰ˆç³»çµ±
                            </a>

                            <div style="display: flex; gap: 8px; margin-bottom: 15px;">
                                <a href="https://chansonwater0701-cmd.github.io/AssuranceDepartmentOK/%E6%83%9F%E5%93%81%E5%B8%83%E9%81%94%E4%BA%8B%E9%A0%85.pptx" target="_blank" style="flex: 1; background: rgba(0,0,0,0.2); color: #81d4fa; text-decoration: none; padding: 8px; border-radius: 4px; text-align: center; font-size: 13px;">
                                    ğŸ“„ æƒŸå“å¸ƒé” PPT
                                </a>
                                <a href="https://chansonwater0701-cmd.github.io/AssuranceDepartmentOK/åƒå±±å¸ƒé”æ³¨æ„äº‹é ….pptx" target="_blank" style="flex: 1; background: rgba(0,0,0,0.2); color: #81d4fa; text-decoration: none; padding: 8px; border-radius: 4px; text-align: center; font-size: 13px;">
                                    ğŸ“„ åƒå±±å¸ƒé” PPT
                                </a>
                            </div>

                            <div style="border-top: 1px dashed rgba(255,255,255,0.3); margin: 15px 0;"></div>

                            <div class="header-title-small">ğŸ’³ ç¾å ´æœå‹™çµå¸³å°ˆå€</div>
                            <p style="font-size: 13px; opacity: 0.9; margin-bottom: 8px;">CLAR | ç¬å†°ç¬ç†±æ·¨æ°´å™¨ | æŠ€å¸«æœå‹™èˆ‡è€—æä»˜æ¬¾</p>
                            
                            <a href="https://www.myclar.com/Service" target="_blank" style="display: flex; justify-content: space-between; align-items: center; background: #004d40; color: #ffeb3b; text-decoration: none; padding: 10px 15px; border-radius: 6px; font-weight: bold;">
                                <span>å‰å¾€ CLAR å®˜æ–¹æ”¯ä»˜</span>
                                <span>â”</span>
                            </a>
                        </div>

            <div class="header-section">
                <div class="header-title-small">ğŸ“‹ å¡«å¯«é ˆçŸ¥èˆ‡è¦ç¯„</div>
                <ul class="header-list">
                    <li>è«‹ä¾å¯¦éš›ä½œæ¥­æƒ…æ³ç¢ºå¯¦ã€å®Œæ•´å¡«å¯«æœ¬è¡¨å–®å…§å®¹ã€‚</li>
                    <li>å‡¡æ¨™ç¤ºã€Œ <span class="highlight-text">*</span>ã€ä¹‹æ¬„ä½çš†ç‚ºã€å¿…å¡«é …ç›®ã€‘ï¼Œæœªå¡«å¯«å°‡ç„¡æ³•é€å‡ºæˆ–è¦–ç‚ºè³‡æ–™ä¸å®Œæ•´ã€‚</li>
                </ul>
            </div>
            <div class="header-section">
                <div class="header-title-small">â„¹ï¸ æœå‹™é …ç›®å®šç¾©åƒè€ƒ</div>
                <ul class="header-list">
                    <li><strong>æ–°æ©Ÿå®‰è£</strong>ï¼šæ–°è¨­å‚™è£è¨­èˆ‡æ¸¬è©¦</li>
                    <li><strong>æ•…éšœç¶­ä¿®</strong>ï¼šè¨­å‚™ç•°å¸¸æ’é™¤æˆ–é›¶ä»¶æ›´æ›</li>
                    <li><strong>å®šæœŸä¿é¤Š</strong>ï¼šä¾‹è¡Œæ€§æª¢æŸ¥èˆ‡æ¸…æ½”</li>
                    <li><strong>è€—ææ›´æ›</strong>ï¼šåƒ…æ›´æ›æ¿¾å¿ƒæˆ–æ¶ˆè€—æ€§ææ–™</li>
                    <li><strong>ç§»æ©Ÿä½œæ¥­</strong>ï¼šæ‹†å¸èˆŠæ©Ÿä¸¦æ–¼æ–°åœ°é»å®‰è£</li>
                    <li><strong>ç§»æ©Ÿä½œæ¥­</strong>ï¼šæ‹†å¸èˆŠæ©Ÿä¸¦æ–¼æ–°åœ°é»å®‰è£</li>
                </ul>
            </div>

            <div class="header-footer">â€» é™¤éæ‚¨è‡ªè¡Œæä¾›ï¼Œå¦å‰‡ä¸æœƒè‡ªå‹•æ”¶é›†æ‚¨çš„è©³ç´°æ•¸æ“šã€‚</div>
        </div>
    <!-- ========== è¡¨å–®å€åŸŸé–‹å§‹ ========== -->
    <!-- 1. å“ç‰Œé¸æ“‡ -->
    <div class="question-card" id="card-brand">
        <div class="question-title">1. è«‹é¸æ“‡å“ç‰Œ <span class="required">*</span></div>
        <div class="radio-group">
            <label class="radio-label"><input type="radio" name="brand" value="åƒå±±" onclick="handleBrandChange()"> åƒå±±</label>
            <label class="radio-label"><input type="radio" name="brand" value="æƒŸå“" onclick="handleBrandChange()"> æƒŸå“</label>
        </div>
    </div>

    <!-- 2. æœå‹™é …ç›® -->
    <div class="question-card hidden-field" id="card-service-item">
        <div class="question-title">2. æœå‹™é …ç›® <span class="required">*</span></div>
        <select name="service_item" id="service_item" onchange="handleServiceItemChange()">
            <option value="">è«‹é¸æ“‡</option>
            <option value="è£æ©Ÿ">è£æ©Ÿ</option>
            <option value="ç¶­ä¿®">ç¶­ä¿®</option>
            <option value="å”®æœ">å”®æœ</option>
            <option value="åˆç´„">åˆç´„</option>
        </select>
    </div>

    <!-- 2-1. æœå‹™ç´°é … (æ ¹æ“šå“ç‰Œèˆ‡æœå‹™é …ç›®å‹•æ…‹è®ŠåŒ–) -->
    <div class="question-card hidden-field" id="card-service-detail">
        <div class="question-title">2-1. æœå‹™ç´°é … <span class="required">*</span></div>
        <select name="service_detail" id="service_detail" onchange="handleServiceDetailChange()">
            <option value="">è«‹é¸æ“‡</option>
        </select>
    </div>

    <!-- 2-2. æ‰‹å‹•è¼¸å…¥æœå‹™ç´°é … (ç•¶é¸æ“‡"å…¶ä»–"æ™‚é¡¯ç¤º) -->
    <div class="question-card hidden-field" id="card-manual-input">
        <div class="question-title">2-2. è«‹è¼¸å…¥æœå‹™ç´°é …</div>
        <input type="text" name="manual_service_detail" placeholder="è«‹è¼¸å…¥è©³ç´°æœå‹™å…§å®¹">
    </div>

    <!-- 3. æ©Ÿå™¨å‹è™Ÿ -->
    <div class="question-card hidden-field" id="card-model">
        <div class="question-title">æ©Ÿå™¨å‹è™Ÿ <span class="required">*</span></div>
        <select name="model" id="model" onchange="handleModelChange()">
            <option value="">è«‹é¸æ“‡</option>
        </select>
    </div>

    <!-- æ©Ÿå™¨å‹è™Ÿ (æƒŸå“è£æ©Ÿ-å–æ¶ˆæ™‚é¡¯ç¤º) -->
    <div class="question-card hidden-field" id="card-machine-type">
        <div class="question-title">æ©Ÿå™¨å‹è™Ÿ</div>
        <input type="text" name="machine_type" placeholder="è«‹è¼¸å…¥æ©Ÿå™¨å‹è™Ÿ">
    </div>

    <!-- ========== ä»¥ä¸‹æ˜¯åƒå±±çš„æ¬„ä½ (ä¿æŒåŸæ¨£) ========== -->
    <!-- æŠ€å¸«å§“å -->
    <div class="question-card hidden-field" id="card-name">
        <div class="question-title">æŠ€å¸«å§“å <span class="required">*</span></div>
        <input type="text" name="engineer_name" placeholder="è«‹è¼¸å…¥æŠ€å¸«å§“å">
    </div>

    <!-- å®¢æˆ¶å§“å -->
    <div class="question-card hidden-field" id="card-wp-customer">
        <div class="question-title">å®¢æˆ¶å§“å <span class="required">*</span></div>
        <input type="text" name="wp_customer_name" placeholder="è«‹è¼¸å…¥å®¢æˆ¶å§“å">
    </div>
    <!-- å®¢æˆ¶ä»£è™Ÿ -->
    <div class="question-card hidden-field" id="card-customer-code">
        <div class="question-title">å®¢æˆ¶ä»£è™Ÿ</div>
        <input type="text" name="customer_code" placeholder="è«‹è¼¸å…¥å®¢æˆ¶ä»£è™Ÿ">
    </div>

    <!-- å®¢æˆ¶åœ°å€ -->
    <div class="question-card hidden-field" id="card-address">
        <div class="question-title">å®¢æˆ¶åœ°å€</div>
        <input type="text" name="customer_address" placeholder="è«‹è¼¸å…¥å®¢æˆ¶åœ°å€">
    </div>

    <!-- å®¢æˆ¶é›»è©± -->
    <div class="question-card hidden-field" id="card-phone">
        <div class="question-title">å®¢æˆ¶é›»è©± <span class="required">*</span></div>
        <input type="text" name="customer_phone" placeholder="è«‹è¼¸å…¥å®¢æˆ¶é›»è©±">
    </div>



    <!-- æ©Ÿå™¨å‹è™Ÿ (åƒå±±ç¶­ä¿®æ™‚æœƒé¡¯ç¤º) -->
    <div class="question-card hidden-field" id="card-model-repair">
        <div class="question-title">æ©Ÿå™¨å‹è™Ÿ</div>
        <input type="text" name="machine_model" placeholder="è«‹è¼¸å…¥æ©Ÿå™¨å‹è™Ÿ">
    </div>
    <!-- ========== æ–°å¢ç¶­ä¿®ç›¸é—œæ¬„ä½ ========== -->
    <!-- æœå‹™æ—¥æœŸ -->
    <div class="question-card hidden-field" id="card-service-date">
        <div class="question-title">æœå‹™æ—¥æœŸ</div>
        <input 
            type="text" 
            name="service_date" 
            placeholder="å¹´/æœˆ/æ—¥" 
            onfocus="(this.type='date')" 
            onblur="if(!this.value)this.type='text'"
        >
    </div>
    <!-- æ©Ÿå™¨å‹è™Ÿ -->
    <div class="question-card hidden-field" id="card-machine-model">
        <div class="question-title">æ©Ÿå™¨å‹è™Ÿ</div>
        <input type="text" name="machine_model" placeholder="è«‹è¼¸å…¥æ©Ÿå™¨å‹è™Ÿ">
    </div>
    <!-- æ©Ÿå™¨æ©Ÿç¢¼ -->
    <div class="question-card hidden-field" id="card-machine-serial">
        <div class="question-title">æ©Ÿå™¨æ©Ÿç¢¼</div>
        <input type="text" name="machine_serial" placeholder="è«‹è¼¸å…¥æ©Ÿå™¨æ©Ÿç¢¼">
    </div>

    <!-- æ©Ÿå™¨æ©Ÿç¢¼ -->
    <div class="question-card hidden-field" id="card-machine-serial">
        <div class="question-title">å®‰è£ä½ç½®</div>
        <input type="text" name="machine_serial" placeholder="è«‹è¼¸å…¥å®‰è£ä½ç½®">
    </div>
    
    <!-- å®‰è£ä½ç½® -->
    <div class="question-card hidden-field" id="card-install-location">
        <div class="question-title">å®‰è£ä½ç½®</div>
        <input type="text" name="install_location" placeholder="è«‹è¼¸å…¥å®‰è£ä½ç½®">
    </div>


    <!-- å®‰è£æ¨“å±¤< -->
    <div class="question-card hidden-field" id="card-install-floor">
        <div class="question-title">æ¨“å±¤è³‡è¨Š</div>
        <div class="multi-input-row">
            <input type="text" name="install_floor" placeholder="å®‰è£æ¨“å±¤ (ä¾‹: 3F)">
            <input type="text" name="total_floors" placeholder="ç¸½æ¨“å±¤æ•¸ (ä¾‹: 12F)">
        </div>
    </div>
    <!-- æ©Ÿå™¨æ©Ÿç¢¼(ç¬¬äºŒå°) -->
    <div class="question-card hidden-field" id="card-machine-serial-2">
        <div class="question-title">æ©Ÿå™¨æ©Ÿç¢¼(ç¬¬äºŒå°)</div>
        <input type="text" name="machine_serial_2" placeholder="è«‹è¼¸å…¥ç¬¬äºŒå°æ©Ÿå™¨æ©Ÿç¢¼">
    </div>

    <!-- æ©Ÿå™¨å‹è™Ÿ(ç¬¬äºŒå°) -->
    <div class="question-card hidden-field" id="card-machine-type-2">
        <div class="question-title">æ©Ÿå™¨å‹è™Ÿ(ç¬¬äºŒå°)</div>
        <input type="text" name="machine_type_2" placeholder="è«‹è¼¸å…¥ç¬¬äºŒå°æ©Ÿå™¨å‹è™Ÿ">
    </div>
    <!-- éŠ·è²¨å–®è™Ÿ -->
    <div class="question-card hidden-field" id="card-invoice-number">
        <div class="question-title">éŠ·è²¨å–®è™Ÿ</div>
        <input type="text" name="invoice_number" placeholder="è«‹è¼¸å…¥éŠ·è²¨å–®è™Ÿ">
    </div>

    <!-- ç³»çµ±å‹è™Ÿ -->
    <div class="question-card hidden-field" id="card-system">
        <div class="question-title">ç³»çµ±å‹è™Ÿ</div>
        <input type="text" name="system_model" placeholder="è«‹è¼¸å…¥ç³»çµ±å‹è™Ÿ">
    </div>


    <!-- ä¿å›ºç‹€æ…‹ -->
    <div class="question-card hidden-field" id="card-warranty">
        <div class="question-title">ä¿å›ºç‹€æ…‹</div>
        <select name="warranty_status">
            <option value="">è«‹é¸æ“‡</option>
            <option value="ä¿å›ºå…§">ä¿å›ºå…§</option>
            <option value="ä¿å›ºå¤–">ä¿å›ºå¤–</option>
        </select>
    </div>

    <!-- éŒ¯èª¤ä»£ç¢¼ -->
    <div class="question-card hidden-field" id="card-error">
        <div class="question-title">éŒ¯èª¤ä»£ç¢¼</div>
        <input type="text" name="error_code" placeholder="è«‹è¼¸å…¥éŒ¯èª¤ä»£ç¢¼">
    </div>

    <!-- æ©Ÿå™¨ç‹€æ…‹ -->
    <div class="question-card hidden-field" id="card-status">
        <div class="question-title">æ©Ÿå™¨ç‹€æ…‹</div>
        <select name="machine_status">
            <option value="">è«‹é¸æ“‡</option>
            <option value="æ­£å¸¸">æ­£å¸¸</option>
            <option value="ç•°å¸¸">ç•°å¸¸</option>
            <option value="å·²ä¿®å¾©">å·²ä¿®å¾©</option>
        </select>
    </div>

    <!-- æ•…éšœæè¿° -->
    <div class="question-card hidden-field" id="card-description">
        <div class="question-title">æ•…éšœæè¿°</div>
        <textarea name="fault_description" rows="3" placeholder="è«‹æè¿°æ•…éšœæƒ…æ³"></textarea>
    </div>

    <!-- ç¶­ä¿®èªªæ˜ -->
    <div class="question-card hidden-field" id="card-repair-note">
        <div class="question-title">ç¶­ä¿®èªªæ˜</div>
        <textarea name="repair_note" rows="3" placeholder="è«‹èªªæ˜ç¶­ä¿®éç¨‹"></textarea>
    </div>

    <!-- æ›´æ›é›¶ä»¶ -->
    <div class="question-card hidden-field" id="card-parts">
        <div class="question-title">æ›´æ›é›¶ä»¶</div>
        <input type="text" name="replaced_parts" placeholder="è«‹è¼¸å…¥æ›´æ›çš„é›¶ä»¶">
    </div>

    <!-- æ”¶æ¬¾é‡‘é¡ -->
    <div class="question-card hidden-field" id="card-payment">
        <div class="question-title">æ”¶æ¬¾é‡‘é¡</div>
        <input type="number" name="payment_amount" placeholder="è«‹è¼¸å…¥é‡‘é¡">
    </div>

    <!-- ä»˜æ¬¾æ–¹å¼ -->
    <div class="question-card hidden-field" id="card-payment-method">
        <div class="question-title">ä»˜æ¬¾æ–¹å¼</div>
        <select name="payment_method">
            <option value="">è«‹é¸æ“‡</option>
            <option value="ç¾é‡‘">ç¾é‡‘</option>
            <option value="åˆ·å¡">åˆ·å¡</option>
            <option value="è½‰å¸³">è½‰å¸³</option>
            <option value="LINE PAY">LINE PAY</option>
        </select>
    </div>
    <!-- åŸæ°´TDS -->
    <div class="question-card hidden-field" id="card-raw-tds">
        <div class="question-title">åŸæ°´TDS</div>
        <input type="text" name="raw_tds" placeholder="è«‹è¼¸å…¥åŸæ°´TDS">
    </div>
    <!-- åŸå§‹æ°´å£“ (ç”¨æ–¼ä¸€èˆ¬è£æ©Ÿï¼ŒåŒ…å«æ¸›å£“é–¥é¸é …) -->
    <div class="question-card hidden-field" id="card-original-pressure">
        <div class="question-title">åŸå§‹æ°´å£“</div>
        <input type="text" name="original_pressure" placeholder="åŸå§‹æ°´å£“å€¼">
        <div class="question-title" style="margin-top: 15px;">æ¸›å£“é–¥</div>
            <select name="pressure_valve" id="pressure_valve" onchange="handlePressureValveChange()">
            <option value="" disabled selected>è«‹é¸æ“‡...</option>
            <option value="æœ‰">æœ‰</option>
            <option value="ç„¡">ç„¡</option>
        </select>
    </div>
    <!-- æ¸›å£“æ°´å£“ (ç•¶æ¸›å£“é–¥é¸æ“‡"æœ‰"æ™‚é¡¯ç¤º) -->
    <div class="question-card hidden-field" id="card-reduced-pressure">
        <div class="question-title">æ¸›å£“æ°´å£“</div>
        <input type="text" name="reduced_pressure" placeholder="æ¸›å£“å¾Œæ°´å£“å€¼">
    </div>

    <!-- å ´åœ°é›»å£“ -->
    <div class="question-card hidden-field" id="card-site-voltage">
        <div class="question-title">å ´åœ°é›»å£“</div>
        <input type="text" name="water_install_location" placeholder="è«‹è¼¸å…¥å ´åœ°é›»å£“">
    </div>

    <!-- åŠ å£“é¦¬é” -->
    <div class="question-card hidden-field" id="card-pressure-pump">
        <div class="question-title">åŠ å£“é¦¬é”</div>
        <select name="pressure_pump" id="pressure_pump">
            <option value="" disabled selected>è«‹é¸æ“‡...</option>
            <option value="æœ‰">æœ‰</option>
            <option value="ç„¡">ç„¡</option>
        </select>
    </div>
    <!-- æ¼æ°´æ–·è·¯å™¨ -->
    <div class="question-card hidden-field" id="card-leak-circuit">
        <div class="question-title">æ¼æ°´æ–·è·¯å™¨</div>
        <select name="leak_circuit" id="leak_circuit" onchange="handleLeakCircuitChange()">
            <option value="" disabled selected>è«‹é¸æ“‡...</option>
            <option value="æœ‰å®‰è£">æœ‰å®‰è£</option>
            <option value="æœªå®‰è£">æœªå®‰è£</option>
        </select>
    </div>
    <div class="question-card hidden-field" id="card-drainage-type">
        <div class="question-title">æ’å»¢æ°´å‹å¼</div>
        <select name="drainage_type">
            <option value="">è«‹é¸æ“‡</option>
            <option value="ï¼´å­—ï¼“é€š">ï¼´å­—ï¼“é€š</option>
            <option value="ç ´ç®¡">ç ´ç®¡</option>
            <option value="åœ°æ’">åœ°æ’</option>
        </select>
    </div>

    <div class="question-card hidden-field" id="card-drainage-note">
        <div class="question-title">æ’å»¢æ°´å‹å¼èªªæ˜</div>
        <input type="text" name="drainage_note" placeholder="è«‹è¼¸å…¥æ’å»¢æ°´å‹å¼èªªæ˜åŸå› ">
    </div>

    <div class="question-card hidden-field" id="card-countertop">
        <div class="question-title">æµç†å°é¢</div>
        <input type="text" name="countertop" placeholder="è«‹è¼¸å…¥æµç†å°é¢èªªæ˜åŸå› ">
    </div>


    <!-- é¾é ­å‹å¼ -->
    <div class="question-card hidden-field" id="card-faucet-type">
        <div class="question-title">é¾é ­å‹å¼</div>
        <input type="text" name="faucet_type" placeholder="è«‹è¼¸å…¥é¾é ­å‹å¼">
    </div>

    <!-- é¾é ­æ¨™ç±¤ -->
    <div class="question-card hidden-field" id="card-faucet-label">
        <div class="question-title">é¾é ­æ¨™ç±¤</div>
        <input type="text" name="faucet_label" placeholder="è«‹è¼¸å…¥é¾é ­æ¨™ç±¤">
    </div>


    <!-- æ¸›å£“æ°´å£“ (å­é …ç›®) -->
    <div class="question-card hidden-field" id="card-reduced-pressure">
        <div class="question-title">æ¸›å£“æ°´å£“</div>
        <input type="text" name="reduced_pressure" placeholder="è«‹è¼¸å…¥æ¸›å£“å¾Œçš„æ°´å£“">
    </div>


    <!-- ========== ä»¥ä¸‹æ˜¯æƒŸå“çš„å°ˆå±¬æ¬„ä½ ========== -->

    <!-- é¢æ¿ç‰ˆæœ¬ -->
    <div class="question-card hidden-field" id="card-panel-version">
        <div class="question-title">é¢æ¿ç‰ˆæœ¬</div>
        <input type="text" name="panel_version" placeholder="è«‹è¼¸å…¥é¢æ¿ç‰ˆæœ¬">
    </div>

    <!-- éŸŒé«”ç‰ˆæœ¬ -->
    <div class="question-card hidden-field" id="card-firmware-version">
        <div class="question-title">éŸŒé«”ç‰ˆæœ¬</div>
        <input type="text" name="firmware_version" placeholder="è«‹è¼¸å…¥éŸŒé«”ç‰ˆæœ¬">
    </div>

    <!-- åŸæ°´TDS (æƒŸå“) -->
    <div class="question-card hidden-field" id="card-wp-raw-tds">
        <div class="question-title">åŸæ°´TDS</div>
        <input type="text" name="wp_raw_tds" placeholder="è«‹è¼¸å…¥åŸæ°´TDS">
    </div>

    <!-- åŸæ°´æ°´å£“ (æƒŸå“) -->
    <div class="question-card hidden-field" id="card-wp-raw-pressure">
        <div class="question-title">åŸæ°´æ°´å£“</div>
        <input type="text" name="wp_raw_pressure" placeholder="è«‹è¼¸å…¥åŸæ°´æ°´å£“">
    </div>

    <!-- ç’°å¢ƒæº«åº¦ -->
    <div class="question-card hidden-field" id="card-env-temp">
        <div class="question-title">ç’°å¢ƒæº«åº¦</div>
        <input type="text" name="env_temp" placeholder="è«‹è¼¸å…¥ç’°å¢ƒæº«åº¦">
    </div>

    <!-- æº«åº¦èˆ‡æ°´é‡çµ„åˆ (ç”¨æ–¼WS2-Cå’ŒWD2-C) -->
    <div class="question-card hidden-field" id="card-temp-group">
        <div class="question-title">æº«åº¦èˆ‡æ°´é‡ <span class="required">*</span></div>
        
        <div class="temp-row" id="temp-100">
            <span class="temp-label">100Â°C</span>
            <input type="text" name="temp_100" placeholder="æº«åº¦">
            <span class="temp-unit">â„ƒ</span>
            <input type="text" name="flow_100" placeholder="æ°´é‡">
            <span class="temp-unit">ml/min</span>
        </div>
        
        <div class="temp-row" id="temp-35">
            <span class="temp-label">35Â°C</span>
            <input type="text" name="temp_35" placeholder="æº«åº¦">
            <span class="temp-unit">â„ƒ</span>
            <input type="text" name="flow_35" placeholder="æ°´é‡">
            <span class="temp-unit">ml/min</span>
        </div>
        
        <div class="temp-row" id="temp-10">
            <span class="temp-label">10Â°C</span>
            <input type="text" name="temp_10" placeholder="æº«åº¦">
            <span class="temp-unit">â„ƒ</span>
            <input type="text" name="flow_10" placeholder="æ°´é‡">
            <span class="temp-unit">ml/min</span>
        </div>
    </div>

        <!-- æº«åº¦èˆ‡æ°´é‡çµ„åˆ (ç”¨æ–¼WS2-Cå’ŒWD2-C) -->
    <div class="question-card hidden-field" id="card-temp-group-100">
        <div class="question-title">æº«åº¦èˆ‡æ°´é‡ <span class="required">*</span></div>
        
        <div class="temp-row" id="temp-100">
            <span class="temp-label">100Â°C</span>
            <input type="text" name="temp_100" placeholder="æº«åº¦">
            <span class="temp-unit">â„ƒ</span>
        </div>
        
        <div class="temp-row" id="temp-35">
            <span class="temp-label">35Â°C</span>
            <input type="text" name="temp_35" placeholder="æº«åº¦">
            <span class="temp-unit">â„ƒ</span>
        </div>

    </div>

    <!-- èª¿æ•´åŠŸç‡ -->
    <div class="question-card hidden-field" id="card-adjust-power">
        <div class="question-title">èª¿æ•´åŠŸç‡</div>
        <input type="text" name="adjust_power" placeholder="è«‹è¼¸å…¥èª¿æ•´åŠŸç‡">
    </div>

    <!-- åŠŸç‡çµ„åˆ (ç†±æ°´èˆ‡å†°æ°´æœ€å¤§åŠŸç‡) -->
    <div class="question-card hidden-field" id="card-power">
        <div class="question-title">æœ€å¤§åŠŸç‡ <span class="required">*</span></div>
        <div class="multi-input-row">
            <input type="text" name="hot_max_power" placeholder="ç†±æ°´æœ€å¤§åŠŸç‡">
            <input type="text" name="cold_max_power" placeholder="å†°æ°´æœ€å¤§åŠŸç‡">
        </div>
    </div>

    <div class="question-card hidden-field" id="card-power-hot">
        <div class="question-title">æœ€å¤§åŠŸç‡ <span class="required">*</span></div>
        <input type="text" name="hot_max_power" placeholder="ç†±æ°´æœ€å¤§åŠŸç‡">
    </div>

    <!-- é¢æ¿é›»å£“ -->
    <div class="question-card hidden-field" id="card-panel-voltage">
        <div class="question-title">é¢æ¿é›»å£“</div>
        <input type="text" name="panel_voltage" placeholder="è«‹è¼¸å…¥é¢æ¿é›»å£“">
    </div>

    <!-- åŸæ°´æ°´é‡ -->
    <div class="question-card hidden-field" id="card-raw-flow">
        <div class="question-title">åŸæ°´æ°´é‡</div>
        <input type="text" name="raw_flow" placeholder="è«‹è¼¸å…¥åŸæ°´æ°´é‡">
    </div>

    <!-- åŸæ°´æº«åº¦ -->
    <div class="question-card hidden-field" id="card-raw-temp">
        <div class="question-title">åŸæ°´æº«åº¦</div>
        <input type="text" name="raw_temp" placeholder="è«‹è¼¸å…¥åŸæ°´æº«åº¦">
    </div>

    <!-- å†°ç¼¸é™æº« (WS2-Hå°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-ice-cooling">
        <div class="question-title">å†°ç¼¸é™æº«</div>
        <input type="text" name="ice_cooling" placeholder="è«‹è¼¸å…¥å†°ç¼¸é™æº«">
    </div>

    <!-- åŸç†èªªæ˜ -->
    <div class="question-card hidden-field" id="card-principle">
        <div class="question-title">åŸç†èªªæ˜</div>
        <textarea name="principle" rows="3" placeholder="è«‹è¼¸å…¥åŸç†èªªæ˜"></textarea>
    </div>

    <!-- å£æ„Ÿçµ„åˆ (æŠ€å¸«èˆ‡å®¢æˆ¶) -->
    <div class="question-card hidden-field" id="card-taste">
        <div class="question-title">å£æ„Ÿè©•åƒ¹ <span class="required">*</span></div>
        <div class="multi-input-row">
            <input type="text" name="engineer_taste" placeholder="æŠ€å¸«å£æ„Ÿ">
            <input type="text" name="customer_taste" placeholder="å®¢æˆ¶å£æ„Ÿ">
        </div>
    </div>

    <!-- æ ¡æ­£æ–¹å¼ -->
    <div class="question-card hidden-field" id="card-calibration">
        <div class="question-title">æ ¡æ­£æ–¹å¼</div>
        <input type="text" name="calibration" placeholder="è«‹è¼¸å…¥æ ¡æ­£æ–¹å¼">
    </div>

    <!-- é›»æ± æ¬¾å¼ -->
    <div class="question-card hidden-field" id="card-battery">
        <div class="question-title">é›»æ± æ¬¾å¼</div>
        <input type="text" name="battery" placeholder="è«‹è¼¸å…¥é›»æ± æ¬¾å¼">
    </div>

    <!-- Filter-C -->
    <div class="question-card hidden-field" id="card-filter-c">
        <div class="question-title">Filter-C</div>
        <input type="text" name="filter_c" placeholder="è«‹è¼¸å…¥Filter-C">
    </div>

    <!-- F11å…¥æ°´æ°´é‡ (WD1å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-f11-flow">
        <div class="question-title">F11å…¥æ°´æ°´é‡</div>
        <input type="text" name="f11_flow" placeholder="è«‹è¼¸å…¥F11å…¥æ°´æ°´é‡">
    </div>

    <!-- ç†±ç¼¸å‡ºæ°´ (WD1å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-hot-tank-output">
        <div class="question-title">ç†±ç¼¸å‡ºæ°´</div>
        <input type="text" name="hot_tank_output" placeholder="è«‹è¼¸å…¥ç†±ç¼¸å‡ºæ°´">
    </div>

    <!-- å¸¸æº«ç¼¸å‡ºæ°´ (WD1å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-normal-tank-output">
        <div class="question-title">å¸¸æº«ç¼¸å‡ºæ°´</div>
        <input type="text" name="normal_tank_output" placeholder="è«‹è¼¸å…¥å¸¸æº«ç¼¸å‡ºæ°´">
    </div>

    <!-- å†°ç¼¸å‡ºæ°´ (WD1å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-ice-tank-output">
        <div class="question-title">å†°ç¼¸å‡ºæ°´</div>
        <input type="text" name="ice_tank_output" placeholder="è«‹è¼¸å…¥å†°ç¼¸å‡ºæ°´">
    </div>

    <!-- å†°ç¼¸é™æº« (WD1å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-ice-tank-cooling">
        <div class="question-title">å†°ç¼¸é™æº«</div>
        <input type="text" name="ice_tank_cooling" placeholder="è«‹è¼¸å…¥å†°ç¼¸é™æº«">
    </div>

    <!-- å ±ä¿®åŸå›  (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-repair-reason">
        <div class="question-title">å ±ä¿®åŸå› </div>
        <textarea name="repair_reason" rows="3" placeholder="è«‹è¼¸å…¥å ±ä¿®åŸå› "></textarea>
    </div>

    <!-- å¯¦éš›åŸå›  (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-actual-reason">
        <div class="question-title">å¯¦éš›åŸå› </div>
        <textarea name="actual_reason" rows="3" placeholder="è«‹è¼¸å…¥å¯¦éš›åŸå› "></textarea>
    </div>

    <!-- è™•ç†æ–¹å¼ (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-handling">
        <div class="question-title">è™•ç†æ–¹å¼</div>
        <textarea name="handling" rows="3" placeholder="è«‹è¼¸å…¥è™•ç†æ–¹å¼"></textarea>
    </div>

    <!-- æª¢ä¿®çµæœ (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-inspection-result">
        <div class="question-title">æª¢ä¿®çµæœ</div>
        <textarea name="inspection_result" rows="3" placeholder="è«‹è¼¸å…¥æª¢ä¿®çµæœ"></textarea>
    </div>

    <!-- æ›´æ›é›¶ä»¶ (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-replaced-parts">
        <div class="question-title">æ›´æ›é›¶ä»¶</div>
        <input type="text" name="wp_replaced_parts" placeholder="è«‹è¼¸å…¥æ›´æ›çš„é›¶ä»¶">
    </div>

    <!-- æ–™ä»¶æ”¶æ¬¾ (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-parts-payment">
        <div class="question-title">æ–™ä»¶æ”¶æ¬¾</div>
        <input type="number" name="parts_payment" placeholder="è«‹è¼¸å…¥æ–™ä»¶æ”¶æ¬¾é‡‘é¡">
    </div>
    <div class="question-card hidden-field" id="card-is-payment">
        <div class="question-title">æ˜¯å¦æ”¶æ¬¾ <span class="required">*</span></div>
        <select name="is_payment" id="is_payment" onchange="handlePaymentVisibility()">
            <option value="">è«‹é¸æ“‡</option>
            <option value="æ˜¯">æ˜¯</option>
            <option value="å¦">å¦</option>
        </select>
    </div>
    <!-- æ”¶æ¬¾å“é … (ç¶­ä¿®å°ˆç”¨) -->
    <div class="question-card hidden-field" id="card-payment-detail">
        <div class="question-title">æ”¶æ¬¾å“é …</div>
        <textarea name="payment_detail" rows="3" placeholder="è«‹è¼¸å…¥æ”¶æ¬¾å“é …"></textarea>
    </div>
    <!-- Appç¶å®š -->
    <div class="question-card hidden-field" id="card-app">
        <div class="question-title">Appç¶å®š</div>
        <input type="text" name="app_binding" placeholder="è«‹è¼¸å…¥Appç¶å®šç‹€æ…‹">
    </div>
    <!-- å…¶ä»–èªªæ˜äº‹é … (æƒŸå“) -->
    <div class="question-card hidden-field" id="card-wp-note">
        <div class="question-title">å…¶ä»–èªªæ˜äº‹é …</div>
        <textarea name="wp_other_notes" rows="3" placeholder="è«‹è¼¸å…¥å…¶ä»–éœ€è¦èªªæ˜çš„äº‹é …"></textarea>
    </div>

    <!-- ========== åº•éƒ¨æ“ä½œæŒ‰éˆ• ========== -->
    <div class="button-bar">
        <button class="btn-primary" onclick="copyForLine()">ğŸ“‹ è¤‡è£½LINEæ ¼å¼</button>
        <button class="btn-secondary" id="btn-upload" onclick="uploadToCloud()">â˜ï¸ ä¸Šå‚³è³‡æ–™</button>
    </div>
</div>

<script>
    const CLOUD_URL = "https://script.google.com/macros/s/AKfycbwR1mONXzkv6-Iqn0q5SV0cLTZ8xKp_HQJcIFDtj8c0KFyI6FWe9QAOdvzvD4kj-JGw/exec";
    let currentBrand = '';
    let currentServiceItem = '';
    let currentServiceDetail = '';
    let currentModel = '';
    let currentRequiredIds = [];

    // åƒå±±è£æ©Ÿå¿…å¡«æ¬„ä½ID
    const qsInstallRequired = [
        'card-name', 'card-service-date', 'card-customer',
        'card-original-pressur', 'card-site-voltage', 'card-waste-type','card-waste-type',
        'card-raw-pressure', 'card-raw-tds', 
    ];

    // åƒå±±ä¸€èˆ¬ç¶­ä¿®å¿…å¡«æ¬„ä½ID
    const qsRepairRequired = [
        'card-name', 'card-service-date', 'card-customer',
        'card-description', 'card-repair-note', 'card-parts'
    ];

    // å“ç‰Œé¸æ“‡è™•ç†
    function handleBrandChange() {
        const brand = document.querySelector('input[name="brand"]:checked')?.value;
        if (!brand) return;

        // --- æ–°å¢ç¢ºèªé‚è¼¯ ---
        // å¦‚æœå·²ç¶“é¸æ“‡éå“ç‰Œï¼Œä¸”ç›®å‰æ­£åœ¨åˆ‡æ›å“ç‰Œï¼Œå‰‡è©¢å•ä½¿ç”¨è€…
        if (currentBrand && currentBrand !== brand) {
            if (!confirm("è®Šæ›´å“ç‰Œå°‡æœƒæ¸…é™¤ç›®å‰æ‰€æœ‰å·²å¡«å¯«çš„å…§å®¹ï¼Œç¢ºå®šè¦è®Šæ›´å—ï¼Ÿ")) {
                // ä½¿ç”¨è€…æŒ‰å–æ¶ˆï¼šå°‡ Radio Button é¸å›åŸæœ¬çš„å“ç‰Œ
                const radios = document.querySelectorAll('input[name="brand"]');
                radios.forEach(r => {
                    r.checked = (r.value === currentBrand);
                });
                return;
            }
        }
        // ------------------

        currentBrand = brand;
        resetFormValues(); // å‘¼å«æ–°å¢çš„é‡ç½®åŠŸèƒ½
        
        // é‡ç½®è®Šæ•¸èˆ‡éš±è—æ¬„ä½
        currentServiceItem = '';
        currentServiceDetail = '';
        currentModel = '';
        
        hideAllCards();
        
        document.getElementById('card-service-item').classList.remove('hidden-field');
        document.getElementById('service_item').value = '';
        
        renumberQuestions();
    }
    /**
    * å¼·åˆ¶æ¸…é™¤æ‰€æœ‰è¼¸å…¥æ¬„ä½çš„å€¼
    * @param {Array} excludeNames ä¸æƒ³è¦è¢«æ¸…é™¤çš„æ¬„ä½åç¨± (ä¾‹å¦‚ ['brand'])
    */
    function resetFormValues(excludeNames = []) {
        const allInputs = document.querySelectorAll('input, select, textarea');
        allInputs.forEach(input => {
            // å¦‚æœé€™å€‹æ¬„ä½åœ¨æ’é™¤æ¸…å–®å…§ï¼Œå°±ä¸å‹•å®ƒ
            if (excludeNames.includes(input.name)) return;

            if (input.type === 'radio' || input.type === 'checkbox') {
                input.checked = false;
            } else {
                input.value = '';
            }
        });
        
        // é¡å¤–é‡ç½®ä¸€äº›è‡ªå®šç¾©çš„ç‹€æ…‹ (å¦‚éš±è—çš„å­æ¬„ä½)
        document.getElementById('card-manual-input')?.classList.add('hidden-field');
        document.getElementById('card-waste-note')?.classList.add('hidden-field');
        document.getElementById('card-reduced-pressure')?.classList.add('hidden-field');
        document.getElementById('card-leak-reason')?.classList.add('hidden-field');
    }
    // æœå‹™é …ç›®é¸æ“‡è™•ç†
    function handleServiceItemChange() {
        const item = document.getElementById('service_item').value;
        if (!item) return;
        // --- æ–°å¢ç¢ºèªé‚è¼¯ ---
        if (currentServiceItem && currentServiceItem !== item) {
            if (!confirm("è®Šæ›´æœå‹™é …ç›®å°‡æœƒé‡ç½®å¾ŒçºŒæ‰€æœ‰æ¬„ä½ï¼Œç¢ºå®šè¦è®Šæ›´å—ï¼Ÿ")) {
                document.getElementById('service_item').value = currentServiceItem;
                return;
            }
        }
        currentServiceItem = item;
        resetFormValues(['brand', 'service_item']); // é‡ç½®é™¤äº†å“ç‰Œè·Ÿæœå‹™é …ç›®ä»¥å¤–çš„æ‰€æœ‰å€¼
        currentServiceDetail = '';
        currentModel = '';
        
        const detailSelect = document.getElementById('service_detail');
        const detailCard = document.getElementById('card-service-detail');
        const modelSelect = document.getElementById('model');
        const modelCard = document.getElementById('card-model');
        
        // æ¸…ç©ºé¸é …
        detailSelect.innerHTML = '<option value="">è«‹é¸æ“‡</option>';
        modelSelect.innerHTML = '<option value="">è«‹é¸æ“‡</option>';
        
        if (currentBrand === 'åƒå±±') {
            if (item === 'è£æ©Ÿ') {
                detailSelect.innerHTML += '<option value="ä¸€èˆ¬è£æ©Ÿ">ä¸€èˆ¬è£æ©Ÿ</option>';
                detailSelect.innerHTML += '<option value="å…¨æˆ¶è£æ©Ÿ">å…¨æˆ¶è£æ©Ÿ</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            } else if (item === 'ç¶­ä¿®') {
                detailSelect.innerHTML += '<option value="ä¸€èˆ¬ç¶­ä¿®">ä¸€èˆ¬ç¶­ä¿®</option>';
                detailSelect.innerHTML += '<option value="å…¨æˆ¶ç¶­ä¿®">å…¨æˆ¶ç¶­ä¿®</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            } else if (item === 'å”®æœ') {
                detailSelect.innerHTML += '<option value="ä¸€èˆ¬å ´å‹˜">ä¸€èˆ¬å ´å‹˜</option>';
                detailSelect.innerHTML += '<option value="å…¨æˆ¶å ´å‹˜">å…¨æˆ¶å ´å‹˜</option>';
                detailSelect.innerHTML += '<option value="ç©ºå€¼">ç©ºå€¼</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            } else if (item === 'åˆç´„') {
                detailSelect.innerHTML += '<option value="æ›´æ›æ¿¾èŠ¯">æ›´æ›æ¿¾èŠ¯</option>';
                detailSelect.innerHTML += '<option value="æ‰‹å‹•è¼¸å…¥">æ‰‹å‹•è¼¸å…¥</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            }    
        } else if (currentBrand === 'æƒŸå“') {
            if (item === 'è£æ©Ÿ') {
                // æƒŸå“è£æ©Ÿ:å…ˆé¸æœå‹™ç´°é …
                detailSelect.innerHTML += '<option value="è£æ©Ÿ">è£æ©Ÿ</option>';
                detailSelect.innerHTML += '<option value="æ–°æ©Ÿç•°å¸¸">æ–°æ©Ÿç•°å¸¸</option>';
                detailSelect.innerHTML += '<option value="å–æ¶ˆ">å–æ¶ˆ</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            } else if (item === 'ç¶­ä¿®') {
                // æƒŸå“ç¶­ä¿®:å…ˆé¸æœå‹™ç´°é …
                detailSelect.innerHTML += '<option value="ç¶­ä¿®">ç¶­ä¿®</option>';
                detailSelect.innerHTML += '<option value="åº—ä¿®">åº—ä¿®</option>';
                detailSelect.innerHTML += '<option value="å‡ç´šè£æ©Ÿ">å‡ç´šè£æ©Ÿ</option>';
                detailSelect.innerHTML += '<option value="æ‹–ä¿®">æ‹–ä¿®</option>';
                detailSelect.innerHTML += '<option value="æ›´æ›é¢æ¿">æ›´æ›é¢æ¿</option>';
                detailSelect.innerHTML += '<option value="å–æ¶ˆ">å–æ¶ˆ</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            } else if (item === 'å”®æœ') {
                // æƒŸå“å”®æœ:å…ˆé¸æœå‹™ç´°é …
                detailSelect.innerHTML += '<option value="æ›´æ›æ¿¾èŠ¯">æ›´æ›æ¿¾èŠ¯</option>';
                detailSelect.innerHTML += '<option value="æ‹†æ©Ÿ">æ‹†æ©Ÿ</option>';
                detailSelect.innerHTML += '<option value="é‡è£æ©Ÿ">é‡è£æ©Ÿ</option>';
                detailSelect.innerHTML += '<option value="æ‰‹å‹•è¼¸å…¥">æ‰‹å‹•è¼¸å…¥</option>';
                detailSelect.innerHTML += '<option value="å–æ¶ˆ">å–æ¶ˆ</option>';
                detailCard.classList.remove('hidden-field');
                modelCard.classList.add('hidden-field');
            }
        }
        
        renumberQuestions();
    }

    // æœå‹™ç´°é …é¸æ“‡è™•ç†
    function handleServiceDetailChange() {
        const detailValue = document.getElementById('service_detail').value;
        if (!detailValue) return;
        
        currentServiceDetail = detailValue;
        
        // è™•ç†æ‰‹å‹•è¼¸å…¥
        const manualCard = document.getElementById('card-manual-input');
        const modelCard = document.getElementById('card-model');
        const modelSelect = document.getElementById('model');
        
        if (currentBrand === 'åƒå±±') {
            if (detailValue === 'å…¶ä»–') {
                manualCard.classList.remove('hidden-field');
            } else {
                manualCard.classList.add('hidden-field');
            }
            showQianshanFields();
        } else if (currentBrand === 'æƒŸå“') {
            manualCard.classList.add('hidden-field');
            
            // æ ¹æ“šæœå‹™é …ç›®å’Œæœå‹™ç´°é …é¡¯ç¤ºæ©Ÿå™¨å‹è™Ÿé¸é …
            modelSelect.innerHTML = '<option value="">è«‹é¸æ“‡</option>';
            
            if (currentServiceItem === 'è£æ©Ÿ') {
                if (detailValue === 'è£æ©Ÿ') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'æ–°æ©Ÿç•°å¸¸') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'å–æ¶ˆ') {
                    modelSelect.innerHTML += '<option value="A11">A11</option>';
                    modelCard.classList.remove('hidden-field');
                }
            } else if (currentServiceItem === 'ç¶­ä¿®') {
                if (detailValue === 'ç¶­ä¿®') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelSelect.innerHTML += '<option value="WD1">WD1</option>';
                    modelSelect.innerHTML += '<option value="WS1">WS1</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'åº—ä¿®') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelSelect.innerHTML += '<option value="WD1">WD1</option>';
                    modelSelect.innerHTML += '<option value="WS1">WS1</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'å‡ç´šè£æ©Ÿ') {
                    modelSelect.innerHTML += '<option value="WD1â†’WD2">WD1â†’WD2</option>';
                    modelSelect.innerHTML += '<option value="WD1â†’WS2C">WD1â†’WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WD1â†’WS2H">WD1â†’WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD1â†’WS2H">WD1â†’WD2</option>';
                    modelSelect.innerHTML += '<option value="WD1â†’WS2-C">WD1â†’WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WD1â†’WS2-H">WD1â†’WS2-H</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'æ‹–ä¿®') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelSelect.innerHTML += '<option value="WD1">WD1</option>';
                    modelSelect.innerHTML += '<option value="WS1">WS1</option>';
                    modelSelect.innerHTML += '<option value="WS1â†’WS2-C">WS1â†’WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS1â†’WS2-H">WS1â†’WS2-H</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'æ›´æ›é¢æ¿') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'å–æ¶ˆ') {
                    modelSelect.innerHTML += '<option value="A11">A11</option>';
                    modelCard.classList.remove('hidden-field');
                }
            } else if (currentServiceItem === 'å”®æœ') {
                if (detailValue === 'æ›´æ›æ¿¾èŠ¯') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'æ‹†æ©Ÿ') {
                    modelSelect.innerHTML += '<option value="ALL">ALL</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'é‡è£æ©Ÿ') {
                    modelSelect.innerHTML += '<option value="WS2-C">WS2-C</option>';
                    modelSelect.innerHTML += '<option value="WS2-H">WS2-H</option>';
                    modelSelect.innerHTML += '<option value="WD2-C">WD2-C</option>';
                    modelSelect.innerHTML += '<option value="WD1">WD1</option>';
                    modelSelect.innerHTML += '<option value="WS1">WS1</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'æ‰‹å‹•è¼¸å…¥') {
                    modelSelect.innerHTML += '<option value="ALL">ALL</option>';
                    modelCard.classList.remove('hidden-field');
                } else if (detailValue === 'å–æ¶ˆ') {
                    modelSelect.innerHTML += '<option value="ALL">ALL</option>';
                    modelCard.classList.remove('hidden-field');
                }
            }
        }
        
        renumberQuestions();
    }

    // æ©Ÿå™¨å‹è™Ÿé¸æ“‡è™•ç†
    function handleModelChange() {
        const model = document.getElementById('model').value;
        if (!model) return;
        
        currentModel = model;
        
        if (currentBrand === 'æƒŸå“') {
            showWeipinFields();
        }
        
        renumberQuestions();
    }

    // é¡¯ç¤ºåƒå±±æ¬„ä½(ä¿æŒåŸæ¨£)
    function showQianshanFields() {
        hideAllCards(true);
        
        const item = currentServiceItem;
        const detail = currentServiceDetail;
        
        if (item === 'è£æ©Ÿ') {
            if (detail === 'ä¸€èˆ¬è£æ©Ÿ') {
                currentRequiredIds = [...qsInstallRequired];
                showCards([
                    'card-name', 'card-invoice-number', 'card-machine-model','card-service-date', 'card-customer','card-customer-code',                     
                    'card-faucet', 'card-site-voltage', 'card-waste-type','card-machine-serial','card-wp-customer',
                    'card-raw-pressure', 'card-raw-tds', 'card-leak-circuit','card-leak-reason',
                    'card-original-pressure','card-pressure-pump','card-drainage-type','card-drainage-note','card-countertop',
                    'card-taste','card-wp-note'


                ]);
            } else if (detail === 'å…¨æˆ¶è£æ©Ÿ') {
                currentRequiredIds = ['card-name', 'card-service-date', 'card-customer', 'card-phone'];
                showCards([
                    'card-name', 'card-invoice-number', 'card-machine-model','card-service-date', 'card-customer',  'card-customer-code',                     
                    'card-faucet', 'card-site-voltage', 'card-waste-type','card-machine-serial','card-install-location','card-install-floor','card-app',
                    'card-raw-pressure', 'card-leak-reason','card-wp-customer',
                    'card-pressure-pump',
                    'card-wp-note'
                ]);
            }
        } else if (item === 'ç¶­ä¿®') {
            if (detail === 'ä¸€èˆ¬ç¶­ä¿®') {
                currentRequiredIds = [...qsRepairRequired];
                showCards([
                    'card-name', 'card-invoice-number','card-machine-model', 'card-service-date', 'card-customer',                     
                    'card-system', 'card-customer-code',  'card-wp-customer','card-original-pressure',
                    'card-warranty', 'card-error', 'card-status','card-raw-tds','card-site-voltage',
                    'card-description', 'card-repair-note', 'card-parts','card-repair-reason','card-actual-reason',
                    'card-machine-serial','card-leak-circuit','card-leak-reason',
                    'card-pressure-pump','card-drainage-type','card-drainage-note','card-taste','card-wp-note','card-handling',
                    'card-inspection-resul','card-is-payment',
                ]);
            } else if (detail === 'å…¨æˆ¶ç¶­ä¿®') {
                currentRequiredIds = ['card-name', 'card-service-date', 'card-customer', 'card-phone'];
                showCards([
                    'card-name', 'card-invoice-number', 'card-machine-model','card-service-date', 'card-customer',                     
                    'card-system', 'card-customer-code',  'card-wp-customer','card-repair-reason','card-actual-reason',
                    'card-machine-serial','card-leak-circuit', 'card-leak-reason', 'card-payment-method','card-handling',
                    'card-pressure-pump','card-drainage-type','card-drainage-note','card-countertop','card-taste','card-wp-note',
                    'card-inspection-result','card-app','card-is-payment',
                ]);
            } else if (detail === 'ä¿é¤Š') {
                currentRequiredIds = ['card-name', 'card-service-date', 'card-customer', 'card-phone'];
                showCards([
                    'card-name', 'card-invoice-number', 'card-machine-model','card-service-date', 'card-customer',                   
                    'card-system', 'card-leak-circuit','card-leak-reason','card-customer-code',  
                    'card-repair-note', 'card-machine-serial', 'card-payment-method',
                    'card-pressure-pump','card-drainage-type','card-drainage-note','card-countertop','card-taste','card-wp-note','card-is-payment',
                ]);
            }
        }
    }

    // é¡¯ç¤ºæƒŸå“æ¬„ä½(æ ¹æ“šéœ€æ±‚æ›´æ–°)
    function showWeipinFields() {
        hideAllCards(true);
        
        if (currentServiceItem === 'è£æ©Ÿ') {
            if (currentServiceDetail === 'æ–°æ©Ÿç•°å¸¸' && currentModel === 'WS2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-machine-type-repair',
                    'card-machine-model-2', 'card-machine-serial-2', 'card-machine-type-2',
                    'card-filter-c', 'card-faucet-type', 'card-faucet-label',
                    'card-wp-customer',
                    'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 
                    'card-raw-flow', 'card-raw-temp',
                    'card-principle', 'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'æ–°æ©Ÿç•°å¸¸' && currentModel === 'WS2-H') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-machine-type-repair',
                    'card-machine-model-2', 'card-machine-serial-2', 'card-machine-type-2',
                    'card-filter-c', 'card-faucet-type', 'card-faucet-label',
                    'card-wp-customer',
                    'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot',
                    'card-raw-flow', 'card-raw-temp',
                    'card-principle', 'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'æ–°æ©Ÿç•°å¸¸' && currentModel === 'WD2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-machine-type-repair',
                    'card-machine-model-2', 'card-machine-serial-2', 'card-machine-type-2',
                    'card-filter-c',
                    'card-wp-customer',
                    'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power', 'card-power',
                    'card-raw-flow', 'card-raw-temp',
                    'card-principle', 'card-taste', 'card-calibration', 'card-battery',
                    'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'è£æ©Ÿ' && currentModel === 'WS2-C') {
                currentRequiredIds = ['card-wp-customer'];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'è£æ©Ÿ' && currentModel === 'WS2-H') {
                currentRequiredIds = ['card-wp-customer'];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure',
                    'card-env-temp', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot',, 'card-temp-group', 'card-raw-flow', 'card-raw-temp', 
                    'card-principle', 'card-taste', 'card-calibration',
                    'card-battery', 'card-app', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'è£æ©Ÿ' && currentModel === 'WD2-C') {
                currentRequiredIds = ['card-wp-customer'];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-filter-c',
                    'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'å–æ¶ˆ' && currentModel === 'A11') {
                currentRequiredIds = [];
                showCards(['card-service-date', 'card-invoice-number', 'card-customer-code', 'card-wp-customer', 'card-wp-note']);
            }
        } else if (currentServiceItem === 'ç¶­ä¿®') {
            if (currentServiceDetail === 'ç¶­ä¿®' && currentModel === 'WS2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-machine-type-repair',
                    'card-machine-model-2', 'card-machine-serial-2', 'card-machine-type-2',
                    'card-filter-c', 'card-faucet-type', 'card-faucet-label',
                    'card-wp-customer',
                    'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'ç¶­ä¿®' && currentModel === 'WS2-H') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-machine-type-repair',
                    'card-machine-model-2', 'card-machine-serial-2', 'card-machine-type-2',
                    'card-filter-c', 'card-faucet-type', 'card-faucet-label',
                    'card-wp-customer',
                    'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot',,  'card-principle', 'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'ç¶­ä¿®' && currentModel === 'WD2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-machine-model', 'card-machine-serial', 'card-machine-type-repair',
                    'card-machine-model-2', 'card-machine-serial-2', 'card-machine-type-2',
                    'card-filter-c','card-wp-customer', 'card-site-voltage', 'card-adjust-power', 'card-power',
                    'card-principle', 'card-taste', 'card-calibration','card-temp-group',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'ç¶­ä¿®' && currentModel === 'WD1') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code','card-machine-serial',
                    'card-site-voltage', 'card-power', 'card-f11-flow','card-filter-c' ,'card-customer',
                    'card-hot-tank-output', 'card-normal-tank-output','card-firmware-version','card-wp-raw-pressure',
                    'card-ice-tank-output', 'card-ice-tank-cooling', 'card-taste',
                    'card-app', 'card-repair-reason', 'card-actual-reason','card-machine-type-repair',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts','card-temp-group-100',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
            } else if (currentServiceDetail === 'ç¶­ä¿®' && currentModel === 'WS1') {
                // ç¶­ä¿®-ç¶­ä¿®-WS1
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code','card-machine-serial',
                    'card-site-voltage', 'card-power', 'card-f11-flow','card-filter-c' ,'card-customer',
                    'card-hot-tank-output', 'card-normal-tank-output','card-firmware-version','card-wp-raw-pressure', 'card-taste',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts','card-temp-group-100',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                // WS1åªé¡¯ç¤º100Â°Cå’Œ35Â°C
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'åº—ä¿®' && currentModel === 'WS2-C') {
                // åº—ä¿®-WS2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'åº—ä¿®' && currentModel === 'WD2-C') {
                // åº—ä¿®-WD2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'åº—ä¿®' && currentModel === 'WD1') {
                // åº—ä¿®-WD1
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial',  'card-customer-code',
                    'card-wp-customer', 'card-firmware-version',
                    'card-temp-group', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note','card-f11-flow',
                    'card-hot-tank-output','card-normal-tank-output','card-ice-tank-output','card-ice-tank-cooling',
                ]);
                document.getElementById('temp-100').style.display = 'flex';                
                // ğŸ‘‡ğŸ‘‡ ä¿®æ”¹é€™è£¡ï¼šæ”¹æˆ 'none' å°±æœƒéš±è—äº† ğŸ‘‡ğŸ‘‡
                document.getElementById('temp-35').style.display = 'none';                
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'åº—ä¿®' && currentModel === 'WS1') {
                // åº—ä¿®-WD1
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial',  'card-customer-code',
                    'card-wp-customer', 'card-firmware-version',
                    'card-temp-group', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note','card-f11-flow',
                    'card-hot-tank-output','card-normal-tank-output',
                ]);
                document.getElementById('temp-100').style.display = 'flex';                
                // ğŸ‘‡ğŸ‘‡ ä¿®æ”¹é€™è£¡ï¼šæ”¹æˆ 'none' å°±æœƒéš±è—äº† ğŸ‘‡ğŸ‘‡
                document.getElementById('temp-35').style.display = 'none';                
                document.getElementById('temp-10').style.display = 'none';                
            } else if (currentServiceDetail === 'åº—ä¿®' && currentModel === 'WS2-H') {
                // åº—ä¿®-WS2-H
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-repair-reason', 'card-actual-reason','card-power-hot',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'æ›´æ›é¢æ¿' && currentModel === 'WS2-C') {
                // æ›´æ›é¢æ¿-WS2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-panel-voltage', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-replaced-parts', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
            } else if (currentServiceDetail === 'æ›´æ›é¢æ¿' && currentModel === 'WS2-H') {
                // æ›´æ›é¢æ¿-WS2-H
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-panel-voltage', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-replaced-parts', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
            } else if (currentServiceDetail === 'å–æ¶ˆ' && currentModel === 'A11') {
                // å–æ¶ˆ-A11
                currentRequiredIds = [];
                showCards([
                    'card-service-date', 'card-invoice-number', 'card-wp-customer',
                    'card-panel-version', 'card-repair-reason', 'card-actual-reason',
                    'card-wp-note'
                ]);
            } else if (currentServiceDetail === 'å‡ç´šè£æ©Ÿ' && currentModel === 'WD1â†’WD2') {
                // å‡ç´šè£æ©Ÿ-WD1â†’WD2
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-model-2', 'card-machine-serial-2',
                    'card-machine-type-2', 'card-filter-c', 'card-customer-code',
                    'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-app', 'card-repair-reason',
                    'card-actual-reason', 'card-handling', 'card-inspection-result',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'å‡ç´šè£æ©Ÿ' && currentModel === 'WS1â†’WD2') {
                // å‡ç´šè£æ©Ÿ-WD1â†’WD2
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-model-2', 'card-machine-serial-2',
                    'card-machine-type-2', 'card-filter-c', 'card-customer-code',
                    'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-app', 'card-repair-reason',
                    'card-actual-reason', 'card-handling', 'card-inspection-result',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'å‡ç´šè£æ©Ÿ' && currentModel === 'WD1â†’WS2C') {
                // å‡ç´šè£æ©Ÿ-WD1â†’WS2C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-model-2', 'card-machine-serial-2',
                    'card-machine-type-2', 'card-filter-c', 'card-faucet-type',
                    'card-faucet-label', 'card-customer-code', 'card-wp-customer',
                    'card-panel-version', 'card-firmware-version', 'card-wp-raw-pressure',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-parts-payment', 'card-payment-detail',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'å‡ç´šè£æ©Ÿ' && currentModel === 'WD1â†’WS2H') {
                // å‡ç´šè£æ©Ÿ-WD1â†’WS2H
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-model-2', 'card-machine-serial-2',
                    'card-machine-type-2', 'card-filter-c', 'card-faucet-type',
                    'card-faucet-label', 'card-customer-code', 'card-wp-customer',
                    'card-panel-version', 'card-firmware-version', 'card-wp-raw-pressure',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-parts-payment', 'card-payment-detail',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'å‡ç´šè£æ©Ÿ' && currentModel === 'WD1â†’WS2-C') {
                // å‡ç´šè£æ©Ÿ-WD1â†’WS2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-model-2', 'card-machine-serial-2',
                    'card-machine-type-2', 'card-filter-c', 'card-faucet-type',
                    'card-faucet-label', 'card-customer-code', 'card-wp-customer',
                    'card-panel-version', 'card-firmware-version', 'card-wp-raw-pressure',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-parts-payment', 'card-payment-detail',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'å‡ç´šè£æ©Ÿ' && currentModel === 'WD1â†’WS2-H') {
                // å‡ç´šè£æ©Ÿ-WD1â†’WS2-H
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-model-2', 'card-machine-serial-2',
                    'card-machine-type-2', 'card-filter-c', 'card-faucet-type',
                    'card-faucet-label', 'card-customer-code', 'card-wp-customer',
                    'card-panel-version', 'card-firmware-version', 'card-wp-raw-pressure',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-parts-payment', 'card-payment-detail',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WS2-C') {
                // æ‹–ä¿®-WS2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-machine-model-2',
                    'card-machine-serial-2', 'card-machine-type-2', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-panel-voltage',
                    'card-raw-flow', 'card-raw-temp', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WS2-H') {
                // æ‹–ä¿®-WS2-H
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-machine-model-2',
                    'card-machine-serial-2', 'card-machine-type-2', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power-hot', 'card-panel-voltage',
                    'card-raw-flow', 'card-raw-temp', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WD2-C') {
                // æ‹–ä¿®-WD2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-machine-model-2',
                    'card-machine-serial-2', 'card-machine-type-2', 'card-filter-c',
                    'card-customer-code', 'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-app', 'card-repair-reason',
                    'card-actual-reason', 'card-handling', 'card-inspection-result',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WD1') {
                // æ‹–ä¿®-WD1
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-machine-model-2',
                    'card-machine-serial-2', 'card-machine-type-2', 'card-filter-c',
                    'card-customer-code', 'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-app', 'card-repair-reason',
                    'card-actual-reason', 'card-handling', 'card-inspection-result',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WS1') {
                // æ‹–ä¿®-WS1(æ–°å¢)
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-customer-code', 'card-wp-customer',
                    'card-firmware-version', 'card-temp-group', 'card-f11-flow',
                    'card-hot-tank-output', 'card-normal-tank-output','card-power-hot',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-replaced-parts', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WS1â†’WS2-C') {
                // æ‹–ä¿®-WS1â†’WS2-C
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-machine-model-2',
                    'card-machine-serial-2', 'card-machine-type-2', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power', 'card-panel-voltage',
                    'card-raw-flow', 'card-raw-temp', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'æ‹–ä¿®' && currentModel === 'WS1â†’WS2-H') {
                // æ‹–ä¿®-WS1â†’WS2-H
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-machine-model-2',
                    'card-machine-serial-2', 'card-machine-type-2', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-site-voltage',
                    'card-adjust-power', 'card-power-hot', 'card-panel-voltage',
                    'card-raw-flow', 'card-raw-temp', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            }
        } else if (currentServiceItem === 'å”®æœ') {
            // ========== å”®æœ â†’ æ›´æ›æ¿¾èŠ¯ ==========
            if (currentServiceDetail === 'æ›´æ›æ¿¾èŠ¯' && currentModel === 'WS2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'æ›´æ›æ¿¾èŠ¯' && currentModel === 'WS2-H') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot', 'card-panel-voltage', 'card-principle',
                    'card-taste', 'card-calibration', 'card-battery',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'æ›´æ›æ¿¾èŠ¯' && currentModel === 'WD2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-firmware-version', 'card-temp-group',
                    'card-site-voltage', 'card-adjust-power', 'card-power-hot',
                    'card-principle', 'card-taste', 'card-calibration',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            // ========== å”®æœ â†’ æ‹†æ©Ÿ ==========
            } else if (currentServiceDetail === 'æ‹†æ©Ÿ' && currentModel === 'ALL') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-customer-code',
                    'card-wp-customer', 'card-repair-reason', 'card-parts-payment',
                    'card-payment-detail', 'card-wp-note'
                ]);
            // ========== å”®æœ â†’ é‡è£æ©Ÿ ==========
            } else if (currentServiceDetail === 'é‡è£æ©Ÿ' && currentModel === 'WS2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-parts-payment', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'é‡è£æ©Ÿ' && currentModel === 'WS2-H') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-faucet-type', 'card-faucet-label', 'card-customer-code',
                    'card-wp-customer', 'card-panel-version', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power-hot', 'card-panel-voltage', 'card-raw-flow',
                    'card-raw-temp', 'card-principle', 'card-taste',
                    'card-calibration', 'card-battery', 'card-app',
                    'card-repair-reason', 'card-actual-reason', 'card-handling',
                    'card-inspection-result', 'card-parts-payment', 'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'none';
            } else if (currentServiceDetail === 'é‡è£æ©Ÿ' && currentModel === 'WD2-C') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-machine-type-repair', 'card-filter-c',
                    'card-customer-code', 'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-tds', 'card-wp-raw-pressure', 'card-env-temp',
                    'card-temp-group', 'card-site-voltage', 'card-adjust-power',
                    'card-power', 'card-raw-flow', 'card-raw-temp',
                    'card-principle', 'card-taste', 'card-calibration',
                    'card-app', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'é‡è£æ©Ÿ' && currentModel === 'WD1') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 
                    'card-machine-serial', 'card-filter-c', 'card-customer-code',
                    'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-f11-flow',
                    'card-hot-tank-output', 'card-normal-tank-output',
                    'card-ice-tank-output', 'card-ice-tank-cooling', 'card-taste',
                    'card-calibration', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            } else if (currentServiceDetail === 'é‡è£æ©Ÿ' && currentModel === 'WS1') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-machine-model',
                    'card-machine-serial', 'card-filter-c', 'card-customer-code',
                    'card-wp-customer', 'card-firmware-version',
                    'card-wp-raw-pressure', 'card-temp-group', 'card-f11-flow',
                    'card-hot-tank-output', 'card-normal-tank-output',
                    'card-taste','card-calibration', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-parts-payment',
                    'card-wp-note'
                ]);
                document.getElementById('temp-100').style.display = 'flex';
                document.getElementById('temp-35').style.display = 'flex';
                document.getElementById('temp-10').style.display = 'flex';
            // ========== å”®æœ â†’ æ‰‹å‹•è¼¸å…¥ ==========
            } else if (currentServiceDetail === 'æ‰‹å‹•è¼¸å…¥' && currentModel === 'ALL') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-wp-customer', 'card-repair-reason', 'card-actual-reason',
                    'card-handling', 'card-inspection-result', 'card-replaced-parts',
                    'card-parts-payment', 'card-payment-detail', 'card-wp-note'
                ]);
            // ========== å”®æœ â†’ å–æ¶ˆ ==========
            } else if (currentServiceDetail === 'å–æ¶ˆ' && currentModel === 'ALL') {
                currentRequiredIds = [];
                showCards([
                    'card-name', 'card-service-date', 'card-invoice-number', 'card-customer-code',
                    'card-wp-customer', 'card-repair-reason', 'card-actual-reason',
                    'card-wp-note'
                ]);
            }
        }
    }

    // éš±è—æ‰€æœ‰å¡ç‰‡
    function hideAllCards(keepBase = false) {
        const allCards = document.querySelectorAll('.question-card');
        allCards.forEach(card => {
            if (keepBase) {
                if (['card-brand', 'card-service-item', 'card-service-detail', 'card-manual-input', 'card-model'].includes(card.id)) {
                    return;
                }
            }
            card.classList.add('hidden-field');
        });
    }

    // é¡¯ç¤ºæŒ‡å®šå¡ç‰‡
    function showCards(ids) {
        ids.forEach(id => {
            const card = document.getElementById(id);
            if (card) card.classList.remove('hidden-field');
        });
    }
    // è™•ç†æ”¶æ¬¾å“é …é¡¯ç¤ºé‚è¼¯
    function handlePaymentVisibility() {
        const isPayment = document.getElementById('is_payment').value;
        const paymentDetailCard = document.getElementById('card-payment-detail');
        
        if (isPayment === 'æ˜¯') {
            paymentDetailCard.classList.remove('hidden-field');
        } else {
            paymentDetailCard.classList.add('hidden-field');
            // å¯é¸ï¼šåˆ‡æ›ç‚ºã€Œå¦ã€æ™‚è‡ªå‹•æ¸…ç©ºå·²å¡«å¯«çš„å“é …
            paymentDetailCard.querySelector('textarea').value = '';
        }
        renumberQuestions(); // é‡æ–°ç·¨è™Ÿ
    }




    // æ’å»¢æ°´å‹å¼è®Šæ›´è™•ç†
    function handleWasteTypeChange() {
        const waste = document.getElementById('waste_type').value;
        const noteCard = document.getElementById('card-waste-note');
        if (waste === 'å›æ¡¶') {
            noteCard.classList.remove('hidden-field');
        } else {
            noteCard.classList.add('hidden-field');
        }
        renumberQuestions();
    }

    // æ¸›å£“é–¥è®Šæ›´è™•ç†
    function handlePressureValveChange() {
        const valve = document.getElementById('pressure_valve').value;
        const reducedCard = document.getElementById('card-reduced-pressure');
        if (valve === 'æœ‰') {
            reducedCard.classList.remove('hidden-field');
        } else {
            reducedCard.classList.add('hidden-field');
        }
        renumberQuestions();
    }

    // æ¼æ°´æ–·è·¯å™¨è®Šæ›´è™•ç†
    function handleLeakCircuitChange() {
        const leak = document.getElementById('leak_circuit').value;
        const reasonCard = document.getElementById('card-leak-reason');
        if (leak === 'æœªå®‰è£') {
            reasonCard.classList.remove('hidden-field');
        } else {
            reasonCard.classList.add('hidden-field');
        }
        renumberQuestions();
    }

    // é‡æ–°ç·¨è™Ÿå•é¡Œ
    function renumberQuestions() {
        const cards = document.querySelectorAll('.question-card:not(.hidden-field)');
        let count = 1;
        let previousCardId = null;
        
        const item = document.getElementById('service_item').value;
        const isInstall = (item === 'è£æ©Ÿ');

        cards.forEach((card) => {
            const title = card.querySelector('.question-title');
            if (title) {
                let text = title.innerText.replace(/^[\d\.\-\s]+/, '').replace('*', '').trim();
                let isRequired = false;

                if (isInstall && currentRequiredIds.includes(card.id)) {
                    isRequired = true;
                }
                else if (!isInstall && (title.innerHTML.includes('required') || title.innerText.includes('*'))) {
                    isRequired = true;
                }
                if (card.id === 'card-service-detail') isRequired = true;

                let htmlContent = "";
                if (card.id === 'card-service-detail') {
                    htmlContent = `2-1. ${text}`;
                } else if (card.id === 'card-manual-input' && previousCardId === 'card-service-detail') {
                    htmlContent = `2-2. ${text}`;
                } else if (card.id === 'card-waste-note' && previousCardId === 'card-waste-type') {
                    htmlContent = `${count - 1}-1. ${text}`;
                } else if (card.id === 'card-leak-reason' && previousCardId === 'card-leak-circuit') {
                    htmlContent = `${count - 1}-1. ${text}`;
                } else if (card.id === 'card-reduced-pressure' && previousCardId === 'card-raw-pressure') {
                    htmlContent = `${count - 1}-1. ${text}`;
                } else {
                    htmlContent = `${count}. ${text}`;
                    count++;
                }

                if (isRequired) {
                    htmlContent += ` <span class="required">*</span>`;
                }
                
                title.innerHTML = htmlContent;
                previousCardId = card.id;
            }
        });
    }

    // è¡¨å–®é©—è­‰
    function validateForm() {
        let isValid = true;
        let errors = [];
        clearErrors();

        const visibleCards = document.querySelectorAll('.question-card:not(.hidden-field)');
        visibleCards.forEach(card => {
            const title = card.querySelector('.question-title');
            if (title && (title.innerHTML.includes('required') || title.innerText.includes('*'))) {
                
                let hasValue = false;
                let inputs = card.querySelectorAll('input:not([type="radio"]), select, textarea');
                let radios = card.querySelectorAll('input[type="radio"]');
                
                const isStrictCard = ['card-temp-group', 'card-power', 'card-taste'].includes(card.id);

                if (isStrictCard) {
                    let allFilled = true;
                    inputs.forEach(input => {
                        const tempRow = input.closest('.temp-row');
                        if (tempRow && tempRow.style.display === 'none') {
                            return;
                        }
                        if (!input.value.trim()) allFilled = false;
                    });
                    hasValue = allFilled;
                } else {
                    if (inputs.length > 0) {
                        inputs.forEach(input => { if(input.value.trim()) hasValue = true; });
                    }
                    if (radios.length > 0) {
                        let radioChecked = false;
                        radios.forEach(r => { if(r.checked) radioChecked = true; });
                        if(radioChecked) hasValue = true; 
                    }
                }

                if (!hasValue) {
                    isValid = false;
                    card.classList.add('error-border');
                    inputs.forEach(i => i.classList.add('error-input'));
                    let errText = title.innerText.replace('*', '').trim();
                    errors.push(errText);
                }
            }
        });

        if (!isValid) alert("âš ï¸ è«‹å¡«å¯«ä»¥ä¸‹å¿…å¡«æ¬„ä½ï¼š\n\n" + errors.join('\n'));
        return isValid;
    }

    // æ¸…é™¤éŒ¯èª¤æ¨™è¨˜
    function clearErrors() {
        document.querySelectorAll('.error-border').forEach(el => el.classList.remove('error-border'));
        document.querySelectorAll('.error-input').forEach(el => el.classList.remove('error-input'));
    }

    // ç²å–è¡¨å–®è³‡æ–™
    function getFormData() {
        let data = {};
        const visibleCards = document.querySelectorAll('.question-card:not(.hidden-field)');
        visibleCards.forEach(card => {
            const inputs = card.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.type === 'radio' && !input.checked) return;
                if (input.name) data[input.name] = input.value;
            });
        });
        return data;
    }

    // è¤‡è£½LINEæ ¼å¼
    function copyForLine() {
        if (!validateForm()) return;
        
        let header = '';
        
        if (currentBrand === 'åƒå±±') {
            const item = document.getElementById('service_item').value;
            const detailSelect = document.getElementById('service_detail');
            header = `ã€${currentBrand} ${item}å›å ±ã€‘`;
            
            const detailCard = document.getElementById('card-service-detail');
            if (detailCard && !detailCard.classList.contains('hidden-field')) {
                header += ` - ${detailSelect.value}`;
            }
        } else if (currentBrand === 'æƒŸå“') {
            const item = document.getElementById('service_item').value;
            const detail = document.getElementById('service_detail').value;
            header = `ã€${currentBrand} ${item}å›å ±ã€‘ - ${detail} - ${currentModel}`;
        }

        let text = header + "\n";
        const visibleCards = document.querySelectorAll('.question-card:not(.hidden-field)');
        
        visibleCards.forEach(card => {
            const titleEl = card.querySelector('.question-title');
            if (titleEl) { 
                let label = titleEl.innerText.replace(/^[\d\.\-\s]+/, '').replace('*', '').trim();
                let value = "";
                
                if (card.id === 'card-temp-group') {
                    let groupText = "";
                    const rows = card.querySelectorAll('.temp-row');
                    rows.forEach(row => {
                        if (row.style.display === 'none') return;
                        
                        const rowLabel = row.querySelector('.temp-label').innerText;
                        const inputs = row.querySelectorAll('input');
                        const val1 = inputs[0].value;
                        const val2 = inputs[1].value;
                        if (val1 || val2) {
                             groupText += `\n${rowLabel}ï¼š${val1}â„ƒ / ${val2}ml/min`;
                        }
                    });
                    if(groupText) value = groupText;
                } 
                else {
                    const multiInputs = card.querySelectorAll('input[type="text"]');
                    if (multiInputs.length > 1) {
                        let vals = [];
                        multiInputs.forEach(i => { if(i.value) vals.push(i.value); });
                        value = vals.join(' / ');
                    } else if (multiInputs.length === 1) {
                        value = multiInputs[0].value;
                    } else {
                        const otherInput = card.querySelector('select, textarea, input[type="number"]');
                        if(otherInput) value = otherInput.value;
                        const checkedRadio = card.querySelector('input[type="radio"]:checked');
                        if(checkedRadio) value = checkedRadio.parentElement.innerText.trim();
                    }
                    
                    if (label.includes('åŸå§‹æ°´å£“')) {
                        const valveSelect = card.querySelector('select[name="pressure_valve"]');
                        if (valveSelect && valveSelect.value) value += ` (æ¸›å£“é–¥: ${valveSelect.value})`;
                    }
                }
                
                if(value) text += `${label}ï¼š${value}\n`;
            }
        });

        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        try { document.execCommand('copy'); alert('âœ… å·²è¤‡è£½ LINE æ ¼å¼å…§å®¹ï¼'); } 
        catch (err) { alert('âŒ è¤‡è£½å¤±æ•—'); }
        document.body.removeChild(textarea);
    }

    // ä¸Šå‚³åˆ°é›²ç«¯
    async function uploadToCloud() {
        if (!validateForm()) return; 
        const data = getFormData();
        const btn = document.getElementById('btn-upload');
        const originalText = btn.innerHTML;
        btn.disabled = true; 
        btn.innerHTML = "â³ ä¸Šå‚³ä¸­...";
        try {
            await fetch(CLOUD_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'text/plain' },
                body: JSON.stringify(data)
            });
            alert("âœ… ä¸Šå‚³æˆåŠŸï¼");
        } catch (e) {
            alert("âœ… ä¸Šå‚³æŒ‡ä»¤å·²ç™¼é€ (è‹¥ç„¡å ±éŒ¯å³æˆåŠŸ)");
            console.error(e);
        } finally {
            btn.disabled = false; 
            btn.innerHTML = originalText;
        }
    }
</script>

</body>
</html>